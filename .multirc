# Add custom bin files
for bin_path in "$HOME/bin" "$HOME/.local/bin/"; do
    if [ -d "$bin_path" ]; then
        export PATH="$bin_path:$PATH"
    fi
done

# Add yarn global binaries
if yarn -v &> /dev/null; then
    export PATH="$(yarn global bin):$PATH"
fi

# Add go binaries
if [ -d "$GOPATH" ]; then
    export PATH="$GOPATH/bin:$PATH"
elif go help &> /dev/null; then
    export PATH="$(go env GOPATH)/bin:$PATH"
fi

# Add AWS autocomplete
if aws --version &> /dev/null; then
    if [ "$0" = "zsh" ]; then
        source "$(dirname $(which aws))/aws_zsh_completer.sh"
    elif [ "$0" = "bash" ]; then
        source "$(dirname $(which aws))/aws_bash_completer"
    fi
fi

# Add gopass autocomplete

if gopass --version &> /dev/null; then
    case "$0" in
    "zsh")
        source <(gopass completion zsh | tail -n +2 | sed \$d)
        compdef _gopass gopass
    ;;
    "bash")
        source <(gopass completion bash)
    ;;
    "fish")
        source <(gopass completion fish)
    ;;
    esac
fi

# Source goto
[[ -s "/usr/local/share/goto.sh" ]] && source /usr/local/share/goto.sh

# Node Virtual Machine Config
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# The next line updates PATH and enables shell command completion for the Google Cloud SDK.
if [ -d "$HOME/google-cloud-sdk" ]; then
    if [ "$0" = "zsh" ] || [ "$0" = "bash" ] || [ "$0" = "fish" ]; then
        source "$HOME/google-cloud-sdk/path.$0.inc"
        source "$HOME/google-cloud-sdk/completion.$0.inc"
    fi
fi

# Additional keys binding for MacOS
if [ "$(uname -s)" = "Darwin" ]; then
    bindkey "^[^[[C" forward-word
    bindkey "^[^[[D" backward-word
    bindkey "^[[H" beginning-of-line
    bindkey "^[[F" end-of-line
    export GPG_TTY=$(tty)
fi

# Default language
export LANG=en_US.UTF-8
